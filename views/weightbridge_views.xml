<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <menuitem id="menu_raw_material_management" name="Raw Material"
            parent="purchase.menu_purchase_root" sequence="2" />

    <menuitem id="menu_weightbridge_management" name="Weightbridge"
            parent="menu_raw_material_management" 
            action="raw_material_action_purchased"
            sequence="1" />

    <menuitem id="menu_farmers" name="Farmers"
            parent="menu_raw_material_management"
            action="account.res_partner_action_supplier" sequence="5"/>

    
    <record id="raw_material_action_purchased" model="ir.actions.act_window">
        <field name="name">Raw Material</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">Weightbridge.raw.material</field>
        <field name="view_mode">tree</field>
        <!-- <field name="context">{"search_default_filter_to_purchase":1, "purchase_product_template": 1}</field> -->
        <!-- <field name="search_view_id" ref="product.product_template_search_view"/> -->
        <field name="view_id" eval="False"/> <!-- Force empty -->
        <!-- TODO: ajouter un text d'aide -->
        <!-- <field name="help" type="html">
          <p class="o_view_nocontent_smiling_face">
            No product found. Let's create one!
          </p><p>
            You must define a product for everything you sell or purchase,
            whether it's a storable product, a consumable or a service.
          </p>
        </field> -->
    </record>

    <record id="raw_material_purchased_tree" model="ir.ui.view">
        <field name="name">raw.material.purchased.tree</field>
        <field name="model">Weightbridge.raw.material</field>
        <field name="arch" type="xml">
            <tree create="false" default_order="start_date asc" default_group_by="start_date">
                <field name="start_date" string="Date"  widget="date"/> <!-- options="{'format': 'dd/MM/yyyy'}" -->
                <field name="name" />
                <field name="farmer_id"/>
                <field name="net_weight"/>
                <field name="status"/>
            </tree>
        </field>
    </record>
</odoo>